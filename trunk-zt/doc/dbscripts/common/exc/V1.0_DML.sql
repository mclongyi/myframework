use `search`;

INSERT INTO `company` (`company_id`,`company_name`,`is_delete`,`category_tree_id`,`short_name`,`virtual_company_id`) VALUES (6,'广生行',0,0,'gsh',-1);

INSERT INTO `saas_common_config` (`company_id`,`index_name`,`app_type`,`status`,`es_cluster_id`,`setting_id`,`is_deleted`,`update_time`) VALUES (6,'b2c_gsh',1,0,1,0,0,NOW());

INSERT INTO `saas_datasource_config` (`company_id`,`db_type`,`onlineody`,`password`,`jdbc_url`,`is_deleted`,`update_time`,`name`) VALUES (-1,'merchant','onlineody','5tgb^YHN','jdbc:mysql://stg.gsh.odianyun.local:3306/merchant?rewriteBatchedStatements=true&characterEncoding=utf8',0,NOW(),'saas-prod'),(-1,'osc','onlineody','5tgb^YHN','jdbc:mysql://stg.gsh.odianyun.local:3306/osc?rewriteBatchedStatements=true&characterEncoding=utf8',0,NOW(),'saas-prod'),(-1,'price','onlineody','5tgb^YHN','jdbc:mysql://stg.gsh.odianyun.local:3306/price?rewriteBatchedStatements=true&characterEncoding=utf8',0,NOW(),'saas-prod'),(-1,'product','onlineody','5tgb^YHN','jdbc:mysql://stg.gsh.odianyun.local:3306/product?rewriteBatchedStatements=true&characterEncoding=utf8',0,NOW(),'saas-prod'),(-1,'stock','onlineody','5tgb^YHN','jdbc:mysql://stg.gsh.odianyun.local:3306/stock?rewriteBatchedStatements=true&characterEncoding=utf8',0,NOW(),'saas-prod');

INSERT INTO `saas_dump_config` (`index_name`,`job_type`,`period`,`cron_expression`,`is_deleted`,`update_time`) VALUES ('b2c_gsh',0,60,NULL,0,NOW());

INSERT INTO `saas_dump_sql` VALUES ('1', '-1', 'merchant', 'merchant', 'select id,name,company_name,merchant_type,identity_card_name,mobile,is_leaf,company_id from merchant where audit_status=1 and is_deleted=0', null), ('2', '-1', 'shop', 'merchant', 'SELECT id ,merchant_id,NAME,logo,shop_type FROM shop WHERE  is_deleted=0', null), ('3', '-1', 'merchant_shop', 'merchant', 'select t1.id merchant_id,t1.merchant_type merchant_type,t2.NAME shop_name from merchant t1 left join shop t2 on t1.id = t2.merchant_id where t1.audit_status=1 and t1.is_deleted=0', 't1.id'), ('4', '-1', 'merchant_belong_area', 'merchant', 'SELECT merchant_id,nation_id,province_id,city_id,region_id,area_code FROM merchant_belong_area WHERE  is_deleted=0', 'merchant_id'), ('5', '-1', 'area', 'osc', 'select id,code,name,level,parentCode,postCode,company_id from area where is_deleted=0', null), ('6', '-1', 'merchant_product_price', 'price', 'select merchant_product_id,merchant_product_price from merchant_product_price where  is_deleted=0', 'merchant_product_id'), ('7', '-1', 'product', 'product', 'select id,brand_id,category_tree_node_id,ean_no,code,calculation_unit,standard from product where is_deleted=0', 'id'), ('8', '-1', 'merchant_prod_merchant_cate_tree_node', 'product', 'select merchant_product_id,merchant_cate_tree_node_id from merchant_prod_merchant_cate_tree_node where is_deleted=0', 'merchant_product_id'), ('9', '-1', 'merchant_prod_sales_record', 'product', 'select merchant_prod_id,cumulative_sales_volume from merchant_prod_sales_record where is_deleted=0', 'merchant_prod_id'), ('10', '-1', 'product_att_name_value', 'product', 'select distinct t1.product_id product_id,t1.att_name_id att_name_id,t2.att_value_id att_value_id from product_att_name t1 join product_att_value t2 on t1.id=t2.product_att_name_id where  t1.is_deleted=0 and t1.type != 4  and t2.is_deleted=0', 't1.product_id'), ('11', '-1', 'attribute_name_value', 'product', 'select distinct 0 as merchantSeriesId,t1.id valueId,t1.value value,t1.attribute_name_id nameId,t2.name name_name,t2.type type,t1.parent_id parent_id,t1.sort_value sort_value from attribute_value t1 join attribute_name t2 on t1.attribute_name_id=t2.id where  t1.is_deleted=0 and  t2.is_deleted=0', null), ('12', '-1', 'brand', 'product', 'select id,name,chinese_name,english_name from brand where is_deleted=0', null), ('13', '-1', 'merchant_cate_tree_node', 'product', 'select t1.id id,t1.parent_id parent_id,t1.merchant_cat_tree_id merchant_cat_tree_id,t1.category_id category_id,t2.name name from merchant_cate_tree_node t1 join category t2 on t1.category_id = t2.id where t1.is_deleted=0 and t2.is_deleted=0', null), ('14', '-1', 'category_tree_node', 'product', 'select t1.id id,t1.parent_id parent_id,t1.category_id category_id,t1.list_sort list_sort,t2.name name from category_tree_node t1 join category t2 on t1.category_id = t2.id where t1.is_deleted=0', null), ('15', '-1', 'category_tree_node_relation', 'product', 'select id,t.left_tree_node_id left_tree_node_id,t.right_tree_node_id right_tree_node_id from category_tree_node_relation t where t.is_deleted=0', null), ('16', '-1', 'merchantProductUrls', 'product', 'select mpp.merchant_prod_id id,p.url url,mpp.sort_value sort_value from merchant_prod_picture mpp join merchant_picture mp join picture p on mpp.merchant_picture_id = mp.id && mp.picture_id = p.id where (mpp.type!=2 or mpp.type is null) and mpp.is_deleted=0 and mp.is_deleted=0 and p.is_deleted=0', 'mpp.merchant_prod_id'), ('17', '-1', 'merchant_product', 'product', 'select id,product_id,merchant_id,chinese_name,english_name,subtitle, is_deleted,create_time,code,company_id,merchant_series_id,tax_no,TYPE, sale_type,IF(datediff(NOW(),create_time)>14,0,1) AS isNew from merchant_product where is_deleted=0 and management_state=1', 'id'), ('18', '-1', 'merchant_series', 'product', 'SELECT id,merchant_id, main_merchant_product_id FROM merchant_series WHERE  is_deleted=0', null), ('19', '-1', 'seriesAttrValueList', 'product', 'select DISTINCT t.merchant_series_id merchantSeriesId,t1.id valueId,t1.value value,t1.attribute_name_id nameId,t2.name name_name,t2.type type,t1.parent_id parent_id,t1.sort_value sort_value from merchant_series_product_att t join attribute_name t2 on t.att_name_id=t2.id join attribute_value t1 on t2.id=t1.attribute_name_id where  t1.is_deleted=0 and  t2.is_deleted=0  and t.is_deleted=0', null), ('20', '-1', 'merchant_product_warehouse_stock', 'stock', 'select merchant_product_id,product_id,merchant_id,real_stock_num,real_frozen_stock_num FROM merchant_product_warehouse_stock WHERE  is_deleted=0', 'merchant_product_id'), ('21', '-1', 'merchant_product_attributes', 'product', 'select DISTINCT man.merchant_product_id merchant_product_id, mav.att_value_id att_value_id   from merchant_prod_att_name man  inner join  merchant_prod_att_value mav on mav.merchant_prod_att_name_id=man.id where man.is_deleted=0 and mav.is_deleted=0', 'man.merchant_product_id');


INSERT INTO `saas_escluster_config`(`cluster_name`,`cluster_nodes`,`admin_url`,`is_deleted`,`update_time`) VALUES ('gsh-stg-es-cluster','10.10.30.18','http://10.10.30.18:9200',0,NOW());

INSERT INTO company_sql_config (`company_id`,`sql_name`,`sql_content`,`is_deleted`) VALUES (-1,'queryAllAreas','select id,code,name,level,parentCode,postCode,company_id from area where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAreasByIds','sselect id,code,name,level,parentCode,postCode,company_id from area where  is_deleted=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAreasByCodes','SELECT id,code,name,level,parentCode,postCode,company_id from area where is_deleted=0 AND code in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllAttributeValue','select  DISTINCT 0 as merchantSeriesId,t1.id valueId,t1.value value,t1.attribute_name_id nameId,t2.name name_name,t2.type type,t1.parent_id parent_id,t1.sort_value sort_value from attribute_value t1 join attribute_name t2 on t1.attribute_name_id=t2.id where  t1.is_deleted=0 and  t2.is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllBrand','SELECT id,name,chinese_name,english_name from brand where is_deleted=0 and type=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryBrands','SELECT id,name,chinese_name,english_name from brand where is_deleted=0 and type=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllCategory','select id,name from category where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllCategoryTreeNode','select id,parent_id,category_id,list_sort from category_tree_node where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategorys','select id,name from category where is_deleted=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategorys','select id,name from category where is_deleted=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoryTreeNode','select id,parent_id,category_id,list_sort from category_tree_node where is_deleted=0 and id=',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategory','select id,name from category where is_deleted=0 and id =',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllCategoryTreeNodeRelation','select left_tree_node_id ,  right_tree_node_id from category_tree_node_relation  where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoryTreeNodeRelation','select left_tree_node_id, right_tree_node_id from category_tree_node_relation where is_deleted=0 and right_tree_node_id=',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoryTreeNodeRelationByUpdateTime','select left_tree_node_id,  right_tree_node_id from category_tree_node_relation where ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoriesByLeftTreeNodeIds','select c.id id,c.name name  from category c join category_tree_node ctn on c.id = ctn.category_id where c.is_deleted=0  and ctn.is_deleted=0 and  ctn.id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoryTreesByLeftTreeNodeIds','select id,parent_id,category_id,list_sort from category_tree_node where is_deleted=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryCategoryTreeNodeRelationsByLeftTreeNodeIds','select left_tree_node_id, right_tree_node_id from category_tree_node_relation where is_deleted=0 and left_tree_node_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllMerchantCateTreeNodes','select id,parent_id,merchant_cat_tree_id,category_id from merchant_cate_tree_node where is_deleted=0 ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantCateTreeNodes','select id,parent_id,merchant_cat_tree_id,category_id from merchant_cate_tree_node where is_deleted=0 and  id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantCateTreeNodeById','select id,parent_id,merchant_cat_tree_id,category_id from merchant_cate_tree_node where is_deleted=0 and  id=',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllMerchant','select id,name,company_name,merchant_type,identity_card_name,mobile,is_leaf,company_id from merchant where audit_status=1 and is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantsWithPage','select id,name,company_name,merchant_type,identity_card_name,mobile,is_leaf,company_id from merchant where audit_status=1 and is_deleted=0 ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchants','select id,name,company_name,merchant_type,identity_card_name,mobile,is_leaf,company_id from merchant where audit_status=1 and is_deleted=0 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllShops','SELECT id,merchant_id,NAME,logo,shop_type FROM shop WHERE  is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getShopsByMerchantIds','SELECT id,merchant_id,NAME,logo,shop_type FROM shop WHERE  is_deleted=0 AND merchant_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllBelongAreas','SELECT merchant_id,nation_id,province_id,city_id,region_id,area_code FROM merchant_belong_area WHERE  is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getBelongAreasByMerchantIds','SELECT merchant_id,nation_id,province_id,city_id,region_id,area_code FROM merchant_belong_area WHERE  is_deleted=0 AND merchant_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllMerchantProduct','select id,product_id,merchant_id,chinese_name,english_name,subtitle,is_deleted,create_time,code,company_id,merchant_series_id,tax_no,TYPE,IF(datediff(NOW(),create_time)>14,0,1) AS isNew from merchant_product where is_deleted=0 and management_state=1',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantProducts','select id,product_id,merchant_id,chinese_name,english_name,subtitle,is_deleted,create_time,code,company_id,merchant_series_id,tax_no,TYPE,sale_type,IF(datediff(NOW(),create_time)>14,0,1) AS isNew from merchant_product where is_deleted=0 and management_state=1 and id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantProductIdsByUpdateTime','select id from merchant_product  ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantProductsWithPage','select id,product_id,merchant_id,chinese_name,english_name,subtitle,is_deleted,create_time,code,company_id,merchant_series_id,tax_no,TYPE,sale_type,IF(datediff(NOW(),create_time)>14,0,1) AS isNew from merchant_product where is_deleted=0  and management_state=1',0);

INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantProductUrls','select mpp.merchant_prod_id id,p.url url,mpp.sort_value sort_value from merchant_prod_picture mpp join merchant_picture mp join picture p on mpp.merchant_picture_id = mp.id && mp.picture_id = p.id where (mpp.type!=2 or mpp.type is null)  and mpp.is_deleted=0 and mp.is_deleted=0 and p.is_deleted=0 and mpp.merchant_prod_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryProductMerchantIdsByProductIds','select id from merchant_product where product_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllProductMerchantPrice','select merchant_product_id,merchant_product_price from merchant_product_price where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantProductPrice','select merchant_product_id,merchant_product_price from merchant_product_price where  is_deleted=0 and merchant_product_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllMerchantProductStocks','SELECT merchant_product_id,product_id,merchant_id,real_stock_num,real_frozen_stock_num FROM merchant_product_warehouse_stock WHERE  is_deleted=0 ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantProductStocksByIds','SELECT merchant_product_id,product_id,merchant_id,real_stock_num,real_frozen_stock_num FROM merchant_product_warehouse_stock WHERE  is_deleted=0 AND merchant_product_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllMerchantSeries','SELECT id,merchant_id, main_merchant_product_id FROM merchant_series WHERE  is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantSeriesList','SELECT id,merchant_id, main_merchant_product_id FROM merchant_series WHERE  is_deleted=0 AND id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'querySeriesAttrValueList','select  DISTINCT t.merchant_series_id merchantSeriesId,t1.id valueId,t1.value value,t1.attribute_name_id nameId,t2.name name_name, t2.type type,t1.parent_id parent_id,t1.sort_value sort_value from merchant_series_product_att t join attribute_name t2 on t.att_name_id=t2.id join attribute_value t1 on t2.id=t1.attribute_name_id where  t1.is_deleted=0 and  t2.is_deleted=0  and t.is_deleted=0 and t.merchant_series_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllProductAttributeValues','select distinct t1.product_id product_id,t1.att_name_id att_name_id,t2.att_value_id att_value_id from product_att_name t1 join product_att_value t2 on t1.id=t2.product_att_name_id where and t1.is_deleted=0 and t1.type !=4  and t2.is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryProductAttributeValues','select distinct t1.product_id product_id,t1.att_name_id att_name_id,t2.att_value_id att_value_id from product_att_name t1 join product_att_value t2 on t1.id=t2.product_att_name_id where  t1.is_deleted=0 and t1.type != 4  and t2.is_deleted=0 and t1.product_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryAllProducts','select id,brand_id,category_tree_node_id,ean_no,code,calculation_unit from product where is_deleted=0',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryProducts','select id,brand_id,category_tree_node_id,ean_no,code,calculation_unit,standard from product where is_deleted=0 and  id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getMerchantCateTreeNodeIds','SELECT  merchant_product_id,merchant_cate_tree_node_id from `merchant_prod_merchant_cate_tree_node` where  is_deleted = 0  and merchant_product_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getProductsByCategoryTreeNodeIds','select id from product where category_tree_node_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getProductsByBrandIds','select id from product where brand_id in',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'getRightCategoryTreeNodeIds','select right_tree_node_id from category_tree_node_relation where left_tree_node_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryVolume4Sale','SELECT product_id,merchant_prod_id,cumulative_sales_volume FROM merchant_prod_sales_record WHERE is_deleted=0 and merchant_prod_id in ',0);
INSERT INTO company_sql_config (company_id,sql_name,sql_content,is_deleted) VALUES (-1,'queryMerchantProductAttributeValues','select DISTINCT man.merchant_product_id merchant_product_id, mav.att_value_id att_value_id  from merchant_prod_att_name man  inner join  merchant_prod_att_value mav on mav.merchant_prod_att_name_id=man.id where man.is_deleted=0 and mav.is_deleted=0 and man.merchant_product_id in',0);

insert into `search_versions`(`v_name`,`type`,`description`,`is_deleted`,`company_id`) values ('V1.0','DDL','初始化搜索表',0,0);
